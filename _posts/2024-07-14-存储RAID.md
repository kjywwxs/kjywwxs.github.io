## 概述

RAID(redundant arrary of independent disks)
指独立的磁盘组成的具有冗余特性的阵列

### RAID 0

有两种

- 第一种只是把多块硬盘看成一块硬盘，写完硬盘1后在写硬盘2，依次类推。这种方式对外表现读写速率没啥变化，只是容量大一点。
- 第二种是将不同硬盘的相同偏移处的块（文件系统一般用块做单位，块包含几个扇区）组合成一个stripe（条带），写时同时写入。对外表现为读写速率加快，容量变大。

### RAID 1

RAID 0 的磁盘阵列如果其中一块损坏，那么所有数据都不能用了，而RAID1使用了保守的策略，也就是让硬盘有一个自己的“影子”，同一份数据多出存放，避免了这个问题

RAID 1阵列  
优势在于**并发性较强，数据存放的安全性较高**  
劣势在于整个**写性能、容量被磁盘组中最菜的那个拖累**

### RAID 2

三块硬盘，一块校验盘，两块数据盘

RAID 2的校验过程使用了汉明码纠错，只能检测出一位错误，如果同时两个以上硬盘有误，那么就数据损坏丢失了。

### RAID 3

RAID 2中每两块数据盘就需要一个校验盘，太多了

RAID 3 多块数据盘使用一个校验盘，校验盘中的数据由所有数据盘进行XOR异或位运算得到，这样只要有一块数据盘损坏，就可以通过校验位和其余数据位计算还原。

RAID 3 将每个条带都做成了4KB（对应常规的文件系统块的大小），这样每次IO都会以条带为单位，调动硬盘并行，

相比RAID 2 **校验效率提升**，使用磁盘更少（**成本减少**），但是**不再支持错误纠正**了

一次IO耗时包括寻道时间，旋转延迟时间，数据传输时间

连续读和连续写的情形下，寻道时间短，RAID 3可以将速度提升N倍（数据盘数量）
随机读和随机写的情况下，寻道时间长，还要主轴同步等等，RAID 3只能提升数据传输时间，对随机读写的情况提升几乎没有

并发IO的情况下，RAID 3一次也只能执行一次IO，因为一次IO就会调用所有盘

### RAID 4

>RAID 4被设计用来处理并发IO的场景，但由于校验盘只有一个自己不能并发（对与很多大小小于条带大小的IO，如果找到若干刚好加起来等于条带大小，那么也可以并行写入，有文件系统实现了这一点），所以并没有解决问题

RAID 4 增加条带的深度，如果一个IO过来小于条带升读，就写入一个磁盘的Segment中，这个过程只用到一个磁盘，因此其他IO可以与它并行

### RAID 5

相比RAID 4 ,RAID 5将校验盘大三分布在每个数据盘中，数据盘越多，那么多IO并发的几率就越大
（2块，3块无法并发IO，四块时最多可并发2个IO概率为0.0322，**怎么算的？？**）

随机读性能好，写性能较差

#### RAID 5E 和 RAID 5EE

RAID 5E相比RAID 5增加了一个热备盘，当有磁盘坏了后顶上
RAID 5EE则是将热备盘像校验盘那样打散到各个磁盘中

### RAID 6

之前的方式都最多只允许坏一块磁盘

新增一个校验式，多一块校验盘
每多一种，那么就允许多损坏一块磁盘依旧能还原数据

RAID 6 有两块校验盘

### RAID10和RAID01

RAID10意味先RAID1（镜像）再套RAID0（条带化）
RAID10意味先RAID0（条带化）再套RAID1（镜像）

